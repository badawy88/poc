!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).otp=n()}(this,(function(){"use strict";var e={name:"OTP",props:{id:String,name:String,digits:{type:Number,default:4},useSeparator:{type:Boolean,default:!1},separator:{type:String,default:"-"},element_name:{type:String,default:"d"}},methods:{handleChange:function(e,n){var t=e.target.value;""===t||isNaN(t)?(e.target.classList.add("is-invalid"),e.target.classList.remove("is-valid")):(e.target.classList.remove("is-invalid"),e.target.classList.add("is-valid")),document.getElementById("".concat(this.id,"_otpValue")).value=this.getOtp()},handleKeypress:function(e){var n=e.key;(isNaN(n)||" "===n)&&e.preventDefault()},keyup:function(e){var n=e.keyCode;37===n||8===n?this.goBack(e):9!==n&&16!==n&&this.goNext(e),32!==n&&46!==n||(e.target.value="")},goNext:function(e){var n=parseInt(e.target.id.replace(this.id+"_"+this.element_name,""));this.go(n+1,n+1<=this.digits)},goBack:function(e){var n=parseInt(e.target.id.replace(this.id+"_"+this.element_name,""));this.go(n-1,n-1>0)},go:function(e,n){if(n){var t=this.getField(e);t.focus(),t.select()}},getOtp:function(){for(var e="",n=1;n<=this.digits;n++){var t=this.getField(n).value;if(""===t){e="";break}e+=t}return e},getField:function(e){return document.getElementById("".concat(this.id,"_").concat(this.element_name).concat(e))}}};function n(e,n,t,i,a,s,o,d,l,r){"boolean"!=typeof o&&(l=d,d=o,o=!1);const c="function"==typeof t?t.options:t;let p;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,a&&(c.functional=!0)),i&&(c._scopeId=i),s?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=p):n&&(p=o?function(e){n.call(this,r(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,d(e))}),p)if(c.functional){const e=c.render;c.render=function(n,t){return p.call(t),e(n,t)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,p):[p]}return t}const t="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function i(e){return(e,n)=>function(e,n){const i=t?n.media||"default":e,o=s[i]||(s[i]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",n.media&&o.element.setAttribute("media",n.media),void 0===a&&(a=document.head||document.getElementsByTagName("head")[0]),a.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(t),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{const e=o.ids.size-1,n=document.createTextNode(t),i=o.element.childNodes;i[e]&&o.element.removeChild(i[e]),i.length?o.element.insertBefore(n,i[e]):o.element.appendChild(n)}}}(e,n)}let a;const s={};const o=e;var d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container opt-container"},[t("div",{staticClass:"row"},[e._l(e.digits,(function(n){return t("span",{key:n},[t("input",{staticClass:"form-control rounded",attrs:{type:"text",maxlength:"1",id:e.id+"_"+e.element_name+n,autocomplete:"off",name:null==e.name?e.id:e.name,required:""},on:{change:e.handleChange,keypress:e.handleKeypress,keyup:e.keyup}}),e._v(" "),e.useSeparator&&e.digits>1&&n==e.digits/2?t("span",{staticClass:"separator",domProps:{textContent:e._s(e.separator)}}):e._e()])})),e._v(" "),t("input",{attrs:{type:"hidden",name:e.id+"_otpValue",id:e.id+"_otpValue"}})],2)])};d._withStripped=!0;return n({render:d,staticRenderFns:[]},(function(e){e&&e("data-v-12f8a3c0_0",{source:"\ninput[type=text][data-v-12f8a3c0] {\n  width: 40px;\n  height: 40px;\n  margin: 2px 2px;\n  text-align: center;\n  line-height: 1.5em;\n  font-size: 1.2rem;\n}\n.separator[data-v-12f8a3c0] {\n  margin: 0px 10px;\n}\n.opt-container *[data-v-12f8a3c0] {\n  direction: ltr !important;\n}\n",map:{version:3,sources:["/Users/badawy88/Documents/projects/vue-components/src/components/OTP.vue"],names:[],mappings:";AA4GA;EACA,WAAA;EACA,YAAA;EACA,eAAA;EACA,kBAAA;EACA,kBAAA;EACA,iBAAA;AACA;AACA;EACA,gBAAA;AACA;AAEA;EACA,yBAAA;AACA",file:"OTP.vue",sourcesContent:["<template>\n  <div class=\"container opt-container\">\n    <div class=\"row\">\n      <span v-bind:key=\"index\" v-for=\"index in digits\">\n      <input type=\"text\" maxlength=\"1\"\n             :id=\"id + '_' + element_name + '' + index\"\n             v-on:change=\"handleChange\"\n             v-on:keypress=\"handleKeypress\"\n             class=\"form-control rounded\"\n             v-on:keyup=\"keyup\"\n             autocomplete=\"off\"\n             :name=\"name == null ? id : name\"\n             required>\n        <span v-if=\"useSeparator && digits>1 && index == digits/2\" class=\"separator\" v-text=\"separator\"></span>\n      </span>\n      <input type=\"hidden\" :name=\"id + '_otpValue'\" :id=\"id + '_otpValue'\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'OTP',\n  props: {\n    id: String,\n    name: String,\n    digits: {\n      type: Number,\n      default: 4\n    },\n    useSeparator: {\n      type: Boolean,\n      default: false\n    },\n    separator: {\n      type: String,\n      default: '-'\n    },\n    element_name: {\n      type: String,\n      default: 'd'\n    }\n  },\n  methods: {\n    handleChange (elem, oldVal) {\n      const value = elem.target.value\n      if (value === '' || isNaN(value)) {\n        elem.target.classList.add('is-invalid')\n        elem.target.classList.remove('is-valid')\n      } else {\n        elem.target.classList.remove('is-invalid')\n        elem.target.classList.add('is-valid')\n      }\n      document.getElementById(`${this.id}_otpValue`).value = this.getOtp()\n    },\n    handleKeypress (elem) {\n      const value = elem.key\n      if (isNaN(value) || value === ' ') {\n        elem.preventDefault()\n      }\n    },\n    keyup (elem) {\n      const keyCode = elem.keyCode\n      if (keyCode === 37 || keyCode === 8) {\n        this.goBack(elem)\n      } else if (keyCode !== 9 && keyCode !== 16) {\n        this.goNext(elem)\n      }\n      if (keyCode === 32 || keyCode === 46) {\n        elem.target.value = ''\n      }\n    },\n    goNext (elem) {\n      const elemIndex = parseInt(elem.target.id.replace(this.id + '_' + this.element_name, ''))\n      this.go(elemIndex + 1, elemIndex + 1 <= this.digits)\n    },\n    goBack (elem) {\n      const elemIndex = parseInt(elem.target.id.replace(this.id + '_' + this.element_name, ''))\n      this.go(elemIndex - 1, elemIndex - 1 > 0)\n    },\n    go (elemIndex, condition) {\n      if (condition) {\n        const newElem = this.getField(elemIndex)\n        newElem.focus()\n        newElem.select()\n      }\n    },\n    getOtp () {\n      let value = ''\n      for (let i = 1; i <= this.digits; i++) {\n        const val = this.getField(i).value\n        if (val === '') {\n          value = ''\n          break\n        }\n        value += val\n      }\n      return value\n    },\n    getField (index) {\n      return document.getElementById(`${this.id}_${this.element_name}${index}`)\n    }\n  }\n}\n<\/script>\n\n\x3c!-- Add \"scoped\" attribute to limit CSS to this component only --\x3e\n<style scoped>\n  input[type=text] {\n    width: 40px;\n    height: 40px;\n    margin: 2px 2px;\n    text-align: center;\n    line-height: 1.5em;\n    font-size: 1.2rem;\n  }\n  .separator {\n    margin: 0px 10px;\n  }\n\n  .opt-container * {\n    direction: ltr !important;\n  }\n</style>\n"]},media:void 0})}),o,"data-v-12f8a3c0",!1,void 0,!1,i,void 0,void 0)}));
